# BÃO CÃO Ä‘á»“ Ã¡n giá»¯a kÃ¬ SKILLGAP AI

**KhÃ³a há»c:** Computational Thinking - 24C06  
**NhÃ³m:** Fantastic Five

### Giáº£ng viÃªn hÆ°á»›ng dáº«n
- BÃ¹i Duy ÄÄƒng
- Huá»³nh LÃ¢m Háº£i ÄÄƒng
- Nguyá»…n Thanh TÃ¬nh

### ThÃ nh viÃªn nhÃ³m
| MSSV | Há» vÃ  tÃªn |
|------|----------|
| 20127552 | VÆ°Æ¡ng Huá»³nh Táº¥n Lá»™c |
| 21127738 | Tráº§n Báº£o Ngá»c |
| 23127465 | Nguyá»…n Há»“ Anh Quá»‘c |
| 23127518 | Tráº§n Quá»‘c Viá»‡t |
| 24127244 | Pháº¡m Táº¥n Nháº­t Thá»‹nh |

---

**NgÃ y bÃ¡o cÃ¡o:** 12/12/2025  
**Dá»± Ã¡n:** SkillGapAI - Há»‡ thá»‘ng phÃ¢n tÃ­ch khoáº£ng cÃ¡ch ká»¹ nÄƒng IT  
**CÃ´ng nghá»‡:** React, TypeScript, Supabase, AI/ML

---

## Má»¤C Lá»¤C
1. [PhÃ¢n cÃ´ng cÃ´ng viá»‡c nhÃ³m](#1-phÃ¢n-cÃ´ng-cÃ´ng-viá»‡c-nhÃ³m)
2. [Tá»•ng quan dá»± Ã¡n](#2-tá»•ng-quan-dá»±-Ã¡n)
3. [BÆ°á»›c 1: PHÃ‚N RÃƒ Váº¤N Äá»€ (Decomposition)](#3-bÆ°á»›c-1-phÃ¢n-rÃ£-váº¥n-Ä‘á»-decomposition)
4. [BÆ°á»›c 2: NHáº¬N Dáº NG MáºªU (Pattern Recognition)](#4-bÆ°á»›c-2-nháº­n-dáº¡ng-máº«u-pattern-recognition)
5. [BÆ°á»›c 3: TRá»ªU TÆ¯á»¢NG HÃ“A (Abstraction)](#5-bÆ°á»›c-3-trá»«u-tÆ°á»£ng-hÃ³a-abstraction)
6. [BÆ°á»›c 4: THIáº¾T Káº¾ THUáº¬T TOÃN (Algorithm Design)](#6-bÆ°á»›c-4-thiáº¿t-káº¿-thuáº­t-toÃ¡n-algorithm-design)
7. [PhÃ¢n tÃ­ch ká»¹ thuáº­t chi tiáº¿t](#7-phÃ¢n-tÃ­ch-ká»¹-thuáº­t-chi-tiáº¿t)
8. [Káº¿t luáº­n](#8-káº¿t-luáº­n)

---

## 1. PHÃ‚N CÃ”NG CÃ”NG VIá»†C NHÃ“M

### 1.1. Tá»•ng quan phÃ¢n cÃ´ng

Dá»± Ã¡n SkillGapAI Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi nhÃ³m **Fantastic Five** vá»›i sá»± phÃ¢n cÃ´ng cÃ´ng viá»‡c rÃµ rÃ ng, Ä‘áº£m báº£o má»—i thÃ nh viÃªn Ä‘Ã³ng gÃ³p vÃ o cÃ¡c pháº§n khÃ¡c nhau cá»§a há»‡ thá»‘ng.

### 1.2. Chi tiáº¿t phÃ¢n cÃ´ng

#### **Pháº¡m Táº¥n Nháº­t Thá»‹nh (24127244)** - Team Leader & Full-stack Developer
**TrÃ¡ch nhiá»‡m chÃ­nh:**
- ğŸ¯ **Quáº£n lÃ½ dá»± Ã¡n:** Äiá»u phá»‘i cÃ´ng viá»‡c, theo dÃµi tiáº¿n Ä‘á»™, tá»• chá»©c há»p nhÃ³m
- ğŸ—ï¸ **Kiáº¿n trÃºc há»‡ thá»‘ng:** Thiáº¿t káº¿ overall architecture, database schema
- âš™ï¸ **Backend Development:**
  - Thiáº¿t káº¿ vÃ  implement Supabase database schema
  - PhÃ¡t triá»ƒn Edge Functions: `analyze-skills`, `compare-skills`
  - Thiáº¿t láº­p Row Level Security (RLS) policies
  - Configuration cho Supabase Storage bucket
- ğŸ“Š **Data Analysis:**
  - Thu tháº­p vÃ  xá»­ lÃ½ market skills data (1491 job postings)
  - Thiáº¿t káº¿ skill mapping dictionary (80+ mappings)
- ğŸ“ **Documentation:** Viáº¿t bÃ¡o cÃ¡o phÃ¢n tÃ­ch theo Computational Thinking

**Deliverables:**
- Database migrations (8 files)
- Edge Functions: analyze-skills, compare-skills
- Market data: market_skills.csv, skills_config.py
- BÃ¡o cÃ¡o ká»¹ thuáº­t chi tiáº¿t

---

#### **Nguyá»…n Há»“ Anh Quá»‘c (23127465)** - AI/ML Specialist & Backend Developer
**TrÃ¡ch nhiá»‡m chÃ­nh:**
- ğŸ¤– **AI Integration:**
  - TÃ­ch há»£p Gemini 2.5 Flash API
  - PhÃ¡t triá»ƒn Edge Function: `ocr-transcript` (OCR vision AI)
  - PhÃ¡t triá»ƒn Edge Function: `chat` (AI chatbot streaming)
  - Fine-tuning AI prompts cho skill extraction
- ğŸ” **Natural Language Processing:**
  - Thiáº¿t káº¿ text normalization algorithms
  - Implement multilingual support (Vietnamese/English)
- ğŸ“· **Image Processing:**
  - Xá»­ lÃ½ multiple image formats (JPG, PNG, WebP, HEIC)
  - Base64 encoding/decoding
- ğŸ’¬ **Chatbot Development:**
  - Server-Sent Events (SSE) streaming implementation
  - Context-aware conversation logic

**Deliverables:**
- Edge Functions: ocr-transcript, chat, get-job-skills
- AI prompt engineering documentation
- OCR accuracy testing report

---

#### **Tráº§n Báº£o Ngá»c (21127738)** - Frontend Developer & UI/UX Designer
**TrÃ¡ch nhiá»‡m chÃ­nh:**
- ğŸ¨ **UI/UX Design:**
  - Thiáº¿t káº¿ wireframes vÃ  mockups
  - Component library setup (shadcn/ui)
  - Responsive design implementation
- âš›ï¸ **Frontend Development:**
  - PhÃ¡t triá»ƒn React components:
    - Pages: Index.tsx, Upload.tsx, Results.tsx
    - Components: SkillGapChart.tsx, FeatureCard.tsx
  - Routing setup vá»›i React Router v6
  - State management vá»›i React Query
- ğŸ“ˆ **Data Visualization:**
  - Implement Recharts bar charts
  - Design metrics cards vÃ  progress indicators
- ğŸ¯ **Landing Page:**
  - Hero section vá»›i animations
  - Features showcase
  - "How It Works" section

**Deliverables:**
- UI Components: 10+ custom components
- Pages: Index, Upload, Results, NotFound
- Tailwind CSS configuration
- Design system documentation

---

#### **Tráº§n Quá»‘c Viá»‡t (23127518)** - Frontend Developer & Authentication Specialist
**TrÃ¡ch nhiá»‡m chÃ­nh:**
- ğŸ” **Authentication System:**
  - Implement Supabase Auth integration
  - PhÃ¡t triá»ƒn pages: Auth.tsx, ForgotPassword.tsx, Profile.tsx
  - Protected routes logic
  - JWT token management
- ğŸ‘¤ **User Management:**
  - User profile management (Personalize.tsx)
  - User preferences storage
  - Email verification flow
- ğŸ“± **User Experience:**
  - Form validation vá»›i React Hook Form + Zod
  - Error handling vÃ  user feedback (toasts)
  - Loading states vÃ  progress tracking
- ğŸ“œ **History & Analytics:**
  - PhÃ¡t triá»ƒn History.tsx page
  - Analysis records management
  - Delete confirmation dialogs

**Deliverables:**
- Pages: Auth, Profile, Personalize, History, ForgotPassword
- Form validation schemas
- Authentication flow documentation
- User journey mapping

---

#### **VÆ°Æ¡ng Huá»³nh Táº¥n Lá»™c (20127552)** - DevOps & Quality Assurance
**TrÃ¡ch nhiá»‡m chÃ­nh:**
- ğŸš€ **Deployment & CI/CD:**
  - Vite build configuration
  - Environment variables setup
  - Lovable platform deployment
  - Domain vÃ  hosting configuration
- ğŸ§ª **Testing & Quality Assurance:**
  - Manual testing cho táº¥t cáº£ features
  - Cross-browser compatibility testing
  - Mobile responsiveness testing
  - Bug tracking vÃ  reporting
- ğŸ“¦ **Package Management:**
  - Dependencies management (package.json)
  - Version control vá»›i Git
  - Code review vÃ  merge requests
- ğŸ”§ **Development Tools:**
  - ESLint configuration
  - TypeScript configuration (tsconfig.json)
  - PostCSS vÃ  Tailwind setup
- ğŸ¤ **Integration Support:**
  - Chatbot UI component (ChatBot.tsx)
  - TopNav component vá»›i auth state
  - Toast notifications system

**Deliverables:**
- Build configuration files
- Testing reports
- Deployment documentation
- Git workflow guidelines

---

### 1.3. CÃ´ng cá»¥ cá»™ng tÃ¡c

| CÃ´ng cá»¥ | Má»¥c Ä‘Ã­ch |
|---------|----------|
| **Git/GitHub** | Version control, code collaboration |
| **Lovable** | Project management, deployment |
| **Supabase** | Backend infrastructure |
| **Discord/Telegram** | Team communication |
| **Figma** | UI/UX design collaboration |
| **Google Docs** | Documentation sharing |

### 1.4. Timeline

| Phase | Duration | Deliverables |
|-------|----------|-------------|
| **Planning & Design** | Week 1-2 | Architecture design, UI mockups, database schema |
| **Backend Development** | Week 3-4 | Database setup, Edge Functions, AI integration |
| **Frontend Development** | Week 5-6 | React components, pages, routing |
| **Integration & Testing** | Week 7 | E2E testing, bug fixes, optimization |
| **Deployment & Documentation** | Week 8 | Production deployment, final report |

### 1.5. Meetings & Sprints

**Weekly Schedule:**
- **Monday:** Sprint planning, task assignment
- **Wednesday:** Mid-week sync, code review
- **Friday:** Sprint review, demo, retrospective

**Communication Protocol:**
- Daily updates qua group chat
- Blocking issues â†’ immediate team call
- Code review required trÆ°á»›c khi merge
- Documentation cáº­p nháº­t liÃªn tá»¥c

---

## 2. Tá»”NG QUAN Dá»° ÃN

### 2.1. Má»¥c Ä‘Ã­ch
**SkillGapAI** lÃ  má»™t á»©ng dá»¥ng web thÃ´ng minh sá»­ dá»¥ng AI Ä‘á»ƒ:
- PhÃ¢n tÃ­ch báº£ng Ä‘iá»ƒm/há»“ sÆ¡ há»c táº­p cá»§a sinh viÃªn IT
- So sÃ¡nh ká»¹ nÄƒng hiá»‡n táº¡i vá»›i nhu cáº§u thá»‹ trÆ°á»ng viá»‡c lÃ m
- ÄÆ°a ra lá»™ trÃ¬nh há»c táº­p cÃ¡ nhÃ¢n hÃ³a Ä‘á»ƒ thu háº¹p khoáº£ng cÃ¡ch ká»¹ nÄƒng

### 2.2. CÃ´ng nghá»‡ sá»­ dá»¥ng
| Lá»›p | CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|-----|-----------|----------|
| **Frontend** | React 18.3, TypeScript | Giao diá»‡n ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c |
| **UI Framework** | shadcn/ui, Radix UI, Tailwind CSS | Há»‡ thá»‘ng thiáº¿t káº¿ component |
| **Backend** | Supabase (PostgreSQL) | Database & Authentication |
| **Serverless Functions** | Deno Edge Functions | Xá»­ lÃ½ logic backend |
| **AI/ML** | Gemini 2.5 Flash (Google) | OCR, phÃ¢n tÃ­ch ká»¹ nÄƒng, chatbot |
| **Data Visualization** | Recharts | Biá»ƒu Ä‘á»“ phÃ¢n tÃ­ch ká»¹ nÄƒng |
| **Routing** | React Router v6 | Äiá»u hÆ°á»›ng SPA |

### 2.3. Kiáº¿n trÃºc tá»•ng quan
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLIENT (Browser)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  React App (TypeScript + Vite)                     â”‚ â”‚
â”‚  â”‚  - UI Components (shadcn/ui)                       â”‚ â”‚
â”‚  â”‚  - Pages (Index, Upload, Results, History, etc.)  â”‚ â”‚
â”‚  â”‚  - State Management (@tanstack/react-query)       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†• HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SUPABASE BACKEND SERVICES                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  PostgreSQL DB   â”‚  â”‚  Auth Service    â”‚            â”‚
â”‚  â”‚  - skill_analysesâ”‚  â”‚  - JWT tokens    â”‚            â”‚
â”‚  â”‚  - profiles      â”‚  â”‚  - RLS policies  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  Storage Bucket  â”‚  â”‚  Edge Functions  â”‚            â”‚
â”‚  â”‚  - transcripts/  â”‚  â”‚  (Deno Runtime)  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†• API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 EDGE FUNCTIONS (Deno)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ocr-transcriptâ”‚ â”‚ analyze-skills â”‚ â”‚compare-skillsâ”‚ â”‚
â”‚  â”‚ (Gemini 2.5)  â”‚ â”‚ (AI Extraction)â”‚ â”‚ (Gap Analysis)â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ get-job-skillsâ”‚ â”‚     chat       â”‚                  â”‚
â”‚  â”‚ (Job Analysis)â”‚ â”‚  (AI Chatbot)  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            EXTERNAL AI SERVICE                           â”‚
â”‚    Lovable AI Gateway â†’ Google Gemini 2.5 Flash         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. BÆ¯á»šC 1: PHÃ‚N RÃƒ Váº¤N Äá»€ (Decomposition)

### 3.1. Váº¥n Ä‘á» chÃ­nh
**"LÃ m tháº¿ nÃ o Ä‘á»ƒ giÃºp sinh viÃªn IT nháº­n biáº¿t vÃ  thu háº¹p khoáº£ng cÃ¡ch giá»¯a ká»¹ nÄƒng hiá»‡n táº¡i vÃ  yÃªu cáº§u thá»‹ trÆ°á»ng viá»‡c lÃ m?"**

### 3.2. PhÃ¢n rÃ£ thÃ nh cÃ¡c váº¥n Ä‘á» con

#### **Module 1: XÃ¡c thá»±c vÃ  quáº£n lÃ½ ngÆ°á»i dÃ¹ng**
- **File liÃªn quan:** [Auth.tsx](src/pages/Auth.tsx), [Profile.tsx](src/pages/Profile.tsx), [ForgotPassword.tsx](src/pages/ForgotPassword.tsx)
- **Chá»©c nÄƒng:**
  - ÄÄƒng kÃ½/ÄÄƒng nháº­p ngÆ°á»i dÃ¹ng
  - XÃ¡c thá»±c email
  - KhÃ´i phá»¥c máº­t kháº©u
  - Quáº£n lÃ½ profile
- **CÃ´ng nghá»‡:** Supabase Auth vá»›i JWT tokens, Row Level Security (RLS)

#### **Module 2: CÃ¡ nhÃ¢n hÃ³a thÃ´ng tin ngÆ°á»i dÃ¹ng**
- **File liÃªn quan:** [Personalize.tsx](src/pages/Personalize.tsx)
- **Chá»©c nÄƒng:**
  - Thu tháº­p ngÃ´n ngá»¯ láº­p trÃ¬nh chÃ­nh (13 options)
  - Thu tháº­p cÃ´ng viá»‡c mÆ¡ Æ°á»›c (14 IT roles)
  - LÆ°u preferences vÃ o database
- **Database:** Báº£ng `profiles` vá»›i trÆ°á»ng `main_language` vÃ  `dream_job`

#### **Module 3: Upload vÃ  xá»­ lÃ½ tÃ i liá»‡u**
- **File liÃªn quan:** [Upload.tsx](src/pages/Upload.tsx), [ocr-transcript/index.ts](supabase/functions/ocr-transcript/index.ts)
- **Chá»©c nÄƒng:**
  - Upload nhiá»u Ä‘á»‹nh dáº¡ng:
    - Documents: PDF, DOCX, TXT, CSV
    - Images: JPG, PNG, WebP, HEIC
  - Kiá»ƒm tra file size (max 10MB)
  - LÆ°u trá»¯ an toÃ n trong Supabase Storage
  - OCR cho áº£nh sá»­ dá»¥ng Gemini 2.5 Flash Vision
- **Workflow:**
  ```
  User Upload â†’ Validation â†’ Storage Upload â†’ OCR (if image) â†’ Text Extraction
  ```

#### **Module 4: TrÃ­ch xuáº¥t ká»¹ nÄƒng tá»« vÄƒn báº£n**
- **File liÃªn quan:** [analyze-skills/index.ts](supabase/functions/analyze-skills/index.ts)
- **Chá»©c nÄƒng:**
  - Mapping Ä‘a ngÃ´n ngá»¯ (Vietnamese/English)
  - Ãnh xáº¡ mÃ´n há»c â†’ ká»¹ nÄƒng IT
  - Há»— trá»£ 80+ skill mappings
- **VÃ­ dá»¥ mapping:**
  ```typescript
  "c/c++": ["c++", "c", "cpp", "láº­p trÃ¬nh c", "láº­p trÃ¬nh c++"]
  "java": ["java", "spring", "spring boot", "hibernate", "láº­p trÃ¬nh java"]
  "machine learning": ["machine learning", "ml", "há»c mÃ¡y", "deep learning"]
  ```
- **AI Processing:**
  - Sá»­ dá»¥ng Gemini 2.5 Flash Ä‘á»ƒ hiá»ƒu context
  - TrÃ­ch xuáº¥t explicit skills (tÃªn mÃ´n há»c)
  - TrÃ­ch xuáº¥t implicit skills (cÃ´ng nghá»‡ áº©n trong mÃ´ táº£)

#### **Module 5: So sÃ¡nh vá»›i thá»‹ trÆ°á»ng viá»‡c lÃ m**
- **File liÃªn quan:** [compare-skills/index.ts](supabase/functions/compare-skills/index.ts), [get-job-skills/index.ts](supabase/functions/get-job-skills/index.ts)
- **Chá»©c nÄƒng:**
  - Load market data tá»« CSV (1491 job postings)
  - Hoáº·c query AI vá» skill requirements cá»§a dream job cá»¥ thá»ƒ
  - TÃ­nh toÃ¡n:
    - **Match Percentage**: % ká»¹ nÄƒng trÃ¹ng khá»›p vá»›i top 20 market skills
    - **Market Readiness**: % sáºµn sÃ ng cho thá»‹ trÆ°á»ng (cÃ³ bonus náº¿u > 15 skills)
    - **Skill Gaps**: Top 10 ká»¹ nÄƒng cÃ²n thiáº¿u, xáº¿p theo % demand
- **Formula:**
  ```
  Match % = (Matched Skills / Top 20 Market Skills) Ã— 100
  Market Readiness = min(95, Match% + (bonus if skills > 15 ? 10 : 0))
  ```

#### **Module 6: Hiá»ƒn thá»‹ káº¿t quáº£ vÃ  phÃ¢n tÃ­ch**
- **File liÃªn quan:** [Results.tsx](src/pages/Results.tsx), [SkillGapChart.tsx](src/components/SkillGapChart.tsx)
- **Chá»©c nÄƒng:**
  - Biá»ƒu Ä‘á»“ so sÃ¡nh (Recharts Bar Chart):
    - Your Level (mÃ u primary)
    - Market Demand (mÃ u accent)
  - 3 Key Metrics Cards:
    - Match Score
    - Market Readiness
    - Critical Gaps
  - Danh sÃ¡ch chi tiáº¿t:
    - Current Skills (badges)
    - Priority Learning Roadmap (ranked gaps)
  - PhÃ¢n loáº¡i gaps: Critical (top 3) vs Important

#### **Module 7: Lá»‹ch sá»­ phÃ¢n tÃ­ch**
- **File liÃªn quan:** [History.tsx](src/pages/History.tsx)
- **Chá»©c nÄƒng:**
  - Hiá»ƒn thá»‹ táº¥t cáº£ analyses cá»§a user
  - ThÃ´ng tin: file name, date, match %, readiness %
  - Actions: View details, Delete
  - AlertDialog xÃ¡c nháº­n delete

#### **Module 8: AI Chatbot há»— trá»£**
- **File liÃªn quan:** [ChatBot.tsx](src/components/ChatBot.tsx), [chat/index.ts](supabase/functions/chat/index.ts)
- **Chá»©c nÄƒng:**
  - Trá»£ lÃ½ AI streaming (SSE - Server-Sent Events)
  - Kiáº¿n thá»©c vá» website:
    - HÆ°á»›ng dáº«n sá»­ dá»¥ng
    - Giáº£i thÃ­ch features
    - Career guidance
  - Context-aware vá» navigation vÃ  user flow

#### **Module 9: Landing Page vÃ  Navigation**
- **File liÃªn quan:** [Index.tsx](src/pages/Index.tsx), [TopNav.tsx](src/components/TopNav.tsx)
- **Chá»©c nÄƒng:**
  - Hero section vá»›i CTA
  - "How It Works" (3 steps)
  - Sample skill gap chart
  - Features showcase
  - Top navigation vá»›i auth state
  - Mobile responsive

---

## 4. BÆ¯á»šC 2: NHáº¬N Dáº NG MáºªU (Pattern Recognition)

### 4.1. Patterns trong kiáº¿n trÃºc

#### **Pattern 1: Component-Based Architecture**
- **MÃ´ táº£:** Chia UI thÃ nh cÃ¡c component Ä‘á»™c láº­p, tÃ¡i sá»­ dá»¥ng
- **VÃ­ dá»¥:**
  ```
  src/components/
  â”œâ”€â”€ ui/               (40+ shadcn components)
  â”‚   â”œâ”€â”€ button.tsx
  â”‚   â”œâ”€â”€ card.tsx
  â”‚   â”œâ”€â”€ dialog.tsx
  â”‚   â””â”€â”€ ...
  â”œâ”€â”€ ChatBot.tsx       (Complex feature component)
  â”œâ”€â”€ SkillGapChart.tsx (Data visualization component)
  â”œâ”€â”€ FeatureCard.tsx   (Presentation component)
  â””â”€â”€ TopNav.tsx        (Layout component)
  ```
- **Lá»£i Ã­ch:** Maintainability, reusability, testability

#### **Pattern 2: Serverless Function Pattern**
- **MÃ´ táº£:** Má»—i chá»©c nÄƒng backend lÃ  má»™t Edge Function riÃªng biá»‡t
- **Cáº¥u trÃºc:**
  ```typescript
  // Pattern template cho má»i function
  const corsHeaders = { /* CORS config */ };
  
  Deno.serve(async (req) => {
    if (req.method === 'OPTIONS') {
      return new Response(null, { headers: corsHeaders });
    }
    
    try {
      const { param1, param2 } = await req.json();
      // Business logic
      const result = await processData(param1, param2);
      return new Response(JSON.stringify(result), {
        headers: { ...corsHeaders, 'Content-Type': 'application/json' }
      });
    } catch (error) {
      return new Response(JSON.stringify({ error: error.message }), {
        status: 500,
        headers: { ...corsHeaders, 'Content-Type': 'application/json' }
      });
    }
  });
  ```
- **Functions:**
  - `ocr-transcript`: Image â†’ Text
  - `analyze-skills`: Text â†’ Skills Array
  - `compare-skills`: Skills â†’ Gap Analysis
  - `get-job-skills`: Job Title â†’ Required Skills
  - `chat`: Messages â†’ AI Response Stream

#### **Pattern 3: Authentication Flow Pattern**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Action  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Auth Status    â”‚ â† supabase.auth.getUser()
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”
   â”‚Auth?  â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚
    â”Œâ”€â”€â”´â”€â”€â”
    â”‚ YES â”‚ NO â†’ Redirect to /auth
    â””â”€â”€â”¬â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Profile    â”‚ â† Query profiles table
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Personalized?â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
      â”Œâ”€â”€â”´â”€â”€â”
      â”‚ YES â”‚ NO â†’ Redirect to /personalize
      â””â”€â”€â”¬â”€â”€â”˜
         â”‚
         â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Allow Accessâ”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
**Ãp dá»¥ng á»Ÿ:** Upload.tsx, History.tsx, Profile.tsx

#### **Pattern 4: Data Processing Pipeline**
```
Input (File/Image) 
  â†’ Extract Text (OCR if needed)
    â†’ Normalize Text (lowercase, remove special chars)
      â†’ Match Skills (SKILL_MAPPING dictionary)
        â†’ Deduplicate (Set)
          â†’ Return Array
```
**File:** [analyze-skills/index.ts](supabase/functions/analyze-skills/index.ts)

#### **Pattern 5: Progressive Enhancement**
- Upload page cÃ³ 2 tabs: Document vÃ  Image
- Tá»± Ä‘á»™ng detect file type vÃ  xá»­ lÃ½ phÃ¹ há»£p
- Fallback mechanisms: Náº¿u get-job-skills fail â†’ dÃ¹ng CSV data

#### **Pattern 6: Error Handling Pattern**
```typescript
try {
  // Main operation
  const result = await riskyOperation();
  return success(result);
} catch (error) {
  console.error('Context:', error);
  toast({
    title: "User-friendly title",
    description: "Helpful message",
    variant: "destructive"
  });
  // Fallback or redirect
  navigate('/fallback-page');
}
```
**Ãp dá»¥ng:** Táº¥t cáº£ pages vÃ  functions

### 4.2. Patterns trong dá»¯ liá»‡u

#### **Pattern 1: JSONB Fields cho Flexibility**
```sql
CREATE TABLE skill_analyses (
  id UUID PRIMARY KEY,
  student_skills JSONB DEFAULT '[]'::jsonb,  -- Array of strings
  market_skills JSONB DEFAULT '[]'::jsonb,   -- Array of objects
  skill_gaps JSONB DEFAULT '[]'::jsonb,      -- Array of objects
  ...
);
```
- Cho phÃ©p lÆ°u structured data mÃ  khÃ´ng cáº§n nhiá»u báº£ng
- Dá»… query vá»›i PostgreSQL JSON operators

#### **Pattern 2: Row Level Security (RLS)**
```sql
-- Pattern: Chá»‰ user má»›i tháº¥y data cá»§a chÃ­nh há»
CREATE POLICY "Users can view their own analyses"
  ON public.skill_analyses
  FOR SELECT
  USING (auth.uid() = user_id);
```
- Ãp dá»¥ng cho: skill_analyses table, storage bucket
- Security by design

#### **Pattern 3: Timestamp Tracking**
```sql
created_at TIMESTAMPTZ DEFAULT now(),
updated_at TIMESTAMPTZ DEFAULT now()
```
- Trigger tá»± Ä‘á»™ng update `updated_at`
- Audit trail

### 4.3. Patterns trong UI/UX

#### **Pattern 1: Loading States**
```typescript
const [loading, setLoading] = useState(false);
const [progress, setProgress] = useState(0);
const [progressMessage, setProgressMessage] = useState('');

// Usage:
setProgress(20);
setProgressMessage('Uploading file...');
```
**NÆ¡i Ã¡p dá»¥ng:** Upload.tsx (multi-step progress), Results.tsx (loading spinner)

#### **Pattern 2: Toast Notifications**
```typescript
toast({
  title: "Success!",
  description: "Your analysis is complete",
});

toast({
  title: "Error",
  description: error.message,
  variant: "destructive"
});
```
**Consistent feedback** cho user actions

#### **Pattern 3: Responsive Layout Grid**
```tsx
<div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
  {/* Cards */}
</div>
```
- Mobile-first
- Breakpoints: md (768px), lg (1024px)

---

## 5. BÆ¯á»šC 3: TRá»ªU TÆ¯á»¢NG HÃ“A (Abstraction)

### 5.1. Abstraction Layers

#### **Layer 1: Presentation Layer (React Components)**
**TrÃ¡ch nhiá»‡m:** Hiá»ƒn thá»‹ UI, xá»­ lÃ½ user interactions
**KhÃ´ng quan tÃ¢m Ä‘áº¿n:**
- Database structure
- API implementation details
- Authentication mechanism internals

**VÃ­ dá»¥:**
```typescript
// SkillGapChart.tsx - Chá»‰ quan tÃ¢m Ä‘áº¿n props interface
interface SkillGapChartProps {
  data?: any[];
  matchPercentage?: number;
  criticalGaps?: number;
  marketReadiness?: number;
}

export const SkillGapChart = ({ data, matchPercentage, ... }) => {
  // Render logic - khÃ´ng quan tÃ¢m data tá»« Ä‘Ã¢u
  return <ResponsiveContainer>...</ResponsiveContainer>;
};
```

#### **Layer 2: Business Logic Layer (Edge Functions)**
**TrÃ¡ch nhiá»‡m:** Xá»­ lÃ½ business rules, data transformation
**KhÃ´ng quan tÃ¢m Ä‘áº¿n:**
- UI rendering
- User input validation (Ä‘Ã£ validate á»Ÿ frontend)
- Storage implementation

**VÃ­ dá»¥:**
```typescript
// analyze-skills/index.ts
// Input: transcriptText (string)
// Output: { skills: string[] }
// Abstraction: KhÃ´ng quan tÃ¢m text tá»« PDF hay Image hay manual input

const extractSkills = (text: string): string[] => {
  const normalized = normalizeText(text);
  const matches = matchSkillsFromMapping(normalized);
  return Array.from(new Set(matches)); // Deduplicate
};
```

#### **Layer 3: Data Access Layer (Supabase Client)**
**TrÃ¡ch nhiá»‡m:** CRUD operations, authentication
**KhÃ´ng quan tÃ¢m Ä‘áº¿n:**
- Business logic
- UI state management

**VÃ­ dá»¥:**
```typescript
// Abstract database operations
const { data, error } = await supabase
  .from('skill_analyses')
  .select('*')
  .eq('user_id', userId);

// Component khÃ´ng biáº¿t data lÆ°u tháº¿ nÃ o, chá»‰ biáº¿t nháº­n data
```

### 5.2. Key Abstractions

#### **Abstraction 1: Skill Mapping Dictionary**
**Problem:** Má»™t ká»¹ nÄƒng cÃ³ nhiá»u cÃ¡ch gá»i (Vietnamese, English, synonyms)
**Solution:** Unified mapping dictionary
```typescript
const SKILL_MAPPING: Record<string, string[]> = {
  "python": ["python", "py", "pandas", "numpy", "láº­p trÃ¬nh python"],
  "java": ["java", "spring", "hibernate", "láº­p trÃ¬nh java"],
  // 80+ mappings
};

// Usage: TÃ¬m "láº­p trÃ¬nh java" â†’ tráº£ vá» key "java"
```
**Benefit:** 
- Single source of truth
- Dá»… maintain vÃ  má»Ÿ rá»™ng
- Nháº¥t quÃ¡n trong toÃ n há»‡ thá»‘ng

#### **Abstraction 2: File Type Detection & Processing**
```typescript
// Abstract away complexity cá»§a viá»‡c xá»­ lÃ½ nhiá»u file types
const extractTextFromFile = async (file: File): Promise<string> => {
  if (IMAGE_TYPES.includes(file.type)) {
    return await extractTextFromImage(file);  // OCR path
  }
  if (file.type === 'text/plain') {
    return await file.text();  // Direct read
  }
  if (file.type === 'application/pdf') {
    return `[PDF: ${file.name}]`;  // Placeholder
  }
  return await file.text();  // Default
};

// Caller chá»‰ cáº§n: const text = await extractTextFromFile(file);
```

#### **Abstraction 3: AI Service Gateway**
**Problem:** KhÃ´ng muá»‘n couple vá»›i má»™t AI provider cá»¥ thá»ƒ
**Solution:** Generic AI function calling
```typescript
// Generic interface
const callAI = async (prompt: string, context: any) => {
  return await fetch('https://ai.gateway.lovable.dev/v1/chat/completions', {
    method: 'POST',
    body: JSON.stringify({
      model: 'google/gemini-2.5-flash',
      messages: [{ role: 'system', content: prompt }, ...context]
    })
  });
};

// Dá»… dÃ ng swap model hoáº·c provider
```

#### **Abstraction 4: Progress Tracking**
```typescript
// Upload.tsx - Abstract multi-step progress
const progressSteps = [
  { percent: 10, message: 'Starting analysis...' },
  { percent: 20, message: 'Uploading file...' },
  { percent: 35, message: 'Processing...' },
  { percent: 50, message: 'Analyzing skills...' },
  { percent: 70, message: 'Comparing with market...' },
  { percent: 90, message: 'Generating report...' },
  { percent: 100, message: 'Complete!' }
];

// Usage:
progressSteps.forEach(step => {
  setProgress(step.percent);
  setProgressMessage(step.message);
});
```

### 5.3. Interface Abstractions

#### **Profile Interface**
```typescript
interface UserProfile {
  main_language: string | null;
  dream_job: string | null;
}
// Abstraction: Component khÃ´ng quan tÃ¢m profile cÃ³ thÃªm fields gÃ¬ khÃ¡c
```

#### **Analysis Result Interface**
```typescript
interface AnalysisResult {
  id: string;
  file_name: string;
  student_skills: any;      // Flexible - cÃ³ thá»ƒ lÃ  array hoáº·c object
  market_skills: any;
  skill_gaps: any;
  match_percentage: number;
  market_readiness: number;
  created_at: string;
}
// Abstraction: Display logic tÃ¡ch biá»‡t khá»i data structure
```

#### **Message Interface (Chatbot)**
```typescript
type Message = { 
  role: "user" | "assistant"; 
  content: string 
};
// Simple abstraction cho conversation state
```

---

## 6. BÆ¯á»šC 4: THIáº¾T Káº¾ THUáº¬T TOÃN (Algorithm Design)

### 6.1. Core Algorithms

#### **Algorithm 1: Skill Extraction tá»« Transcript**
**File:** [analyze-skills/index.ts](supabase/functions/analyze-skills/index.ts)

**Input:** 
- `transcriptText` (string): Ná»™i dung báº£ng Ä‘iá»ƒm
- `mainLanguage` (string): NgÃ´n ngá»¯ chÃ­nh cá»§a user

**Output:**
- `skills` (string[]): Máº£ng cÃ¡c ká»¹ nÄƒng Ä‘Ã£ trÃ­ch xuáº¥t

**Pseudocode:**
```
FUNCTION extractSkills(transcriptText, mainLanguage):
  // Step 1: Normalize text
  normalizedText = transcriptText.toLowerCase()
  normalizedText = removeSpecialCharacters(normalizedText)
  normalizedText = removeExtraWhitespace(normalizedText)
  
  // Step 2: Initialize result set
  extractedSkills = new Set()
  
  // Step 3: Match against SKILL_MAPPING dictionary
  FOR EACH (standardSkill, synonyms) IN SKILL_MAPPING:
    FOR EACH synonym IN synonyms:
      IF normalizedText.contains(synonym):
        extractedSkills.add(standardSkill)
        BREAK  // TrÃ¡nh duplicate tá»« cÃ¹ng skill
  
  // Step 4: AI Enhancement (náº¿u cáº§n)
  IF extractedSkills.size < 5:
    // Text quÃ¡ ngáº¯n hoáº·c mapping khÃ´ng match
    aiSkills = callAI_extractSkills(transcriptText, mainLanguage)
    extractedSkills.addAll(aiSkills)
  
  // Step 5: Deduplicate vÃ  return
  RETURN Array.from(extractedSkills)
END FUNCTION
```

**Äá»™ phá»©c táº¡p:**
- **Time:** O(n Ã— m Ã— k) 
  - n: sá»‘ mappings (~80)
  - m: sá»‘ synonyms per skill (avg ~5)
  - k: Ä‘á»™ dÃ i text (search operation)
- **Space:** O(s) where s = sá»‘ skills tÃ¬m Ä‘Æ°á»£c (usually < 50)

**Optimizations:**
- Early break khi tÃ¬m tháº¥y synonym
- Set Ä‘á»ƒ tá»± Ä‘á»™ng deduplicate
- Cache normalized text

---

#### **Algorithm 2: Skill Gap Analysis**
**File:** [compare-skills/index.ts](supabase/functions/compare-skills/index.ts)

**Input:**
- `studentSkills` (string[]): Ká»¹ nÄƒng cá»§a sinh viÃªn
- `dreamJob` (string): CÃ´ng viá»‡c mÆ¡ Æ°á»›c

**Output:**
- `skillGaps` (array): Top 10 ká»¹ nÄƒng cÃ²n thiáº¿u
- `matchPercentage` (number): % match vá»›i market
- `marketReadiness` (number): % sáºµn sÃ ng lÃ m viá»‡c

**Pseudocode:**
```
FUNCTION compareSkills(studentSkills, dreamJob):
  // Step 1: Load market data
  IF dreamJob EXISTS:
    marketSkillCounts = getJobSpecificSkills(dreamJob)
  ELSE:
    marketSkillCounts = loadCSVMarketData()
  
  // Step 2: Convert student skills to Set (lowercase)
  studentSkillSet = new Set(studentSkills.map(s => s.toLowerCase()))
  
  // Step 3: Calculate skill demand percentages
  totalJobs = 1491
  marketSkills = []
  FOR EACH (skill, count) IN marketSkillCounts:
    percentage = (count / totalJobs) Ã— 100
    marketSkills.push({
      skill: skill,
      count: count,
      percentage: round(percentage)
    })
  
  // Step 4: Sort by demand (descending)
  marketSkills.sort((a, b) => b.count - a.count)
  
  // Step 5: Find gaps (top market skills NOT in student set)
  skillGaps = []
  FOR EACH marketSkill IN marketSkills:
    IF NOT studentSkillSet.has(marketSkill.skill.toLowerCase()):
      skillGaps.push(marketSkill)
    IF skillGaps.length >= 10:
      BREAK
  
  // Step 6: Calculate match metrics
  topMarketSkills = marketSkills.slice(0, 20)
  matchedCount = 0
  FOR EACH topSkill IN topMarketSkills:
    IF studentSkillSet.has(topSkill.skill.toLowerCase()):
      matchedCount++
  
  matchPercentage = (matchedCount / topMarketSkills.length) Ã— 100
  
  // Step 7: Calculate market readiness (with bonus)
  bonus = (studentSkills.length > 15) ? 10 : 0
  marketReadiness = min(95, matchPercentage + bonus)
  
  // Step 8: Generate chart data
  chartData = topMarketSkills.slice(0, 8).map(skill => ({
    skill: skill.skill,
    yourLevel: studentSkillSet.has(skill.skill) ? 
      random(60, 85) : 0,  // Simulated proficiency
    marketDemand: skill.percentage,
    gap: studentSkillSet.has(skill.skill) ? 
      max(0, skill.percentage - 70) : skill.percentage
  }))
  
  RETURN {
    skillGaps,
    matchPercentage: round(matchPercentage),
    marketReadiness: round(marketReadiness),
    chartData
  }
END FUNCTION
```

**Äá»™ phá»©c táº¡p:**
- **Time:** 
  - Load data: O(n) - n lÃ  sá»‘ skills trong market
  - Set creation: O(s) - s lÃ  student skills
  - Sorting: O(n log n)
  - Gap finding: O(n)
  - **Total: O(n log n)**
- **Space:** O(n + s)

**Key Logic Points:**
1. **Match Percentage:** So vá»›i **top 20** market skills, khÃ´ng pháº£i toÃ n bá»™
2. **Bonus System:** Reward students vá»›i breadth (>15 skills)
3. **Gap Ranking:** Theo % demand, khÃ´ng pháº£i count
4. **Limit 10 gaps:** TrÃ¡nh overwhelm user

---

#### **Algorithm 3: OCR Text Extraction**
**File:** [ocr-transcript/index.ts](supabase/functions/ocr-transcript/index.ts)

**Input:**
- `imageBase64` (string): áº¢nh Ä‘Ã£ encode
- `mimeType` (string): image/jpeg, image/png, etc.

**Output:**
- `text` (string): Text Ä‘Ã£ extract

**Pseudocode:**
```
FUNCTION extractTextFromImage(imageBase64, mimeType):
  // Step 1: Prepare AI prompt
  systemPrompt = `
    You are an OCR specialist for academic transcripts.
    Extract ALL text preserving:
    - Course names and codes
    - Grades and credits
    - Semester info
    Return ONLY extracted text, no commentary.
  `
  
  // Step 2: Call Vision AI
  response = await callAI({
    model: 'gemini-2.5-flash',
    messages: [
      { role: 'system', content: systemPrompt },
      { 
        role: 'user', 
        content: [
          { type: 'text', text: 'Extract all text from this transcript' },
          { 
            type: 'image_url', 
            image_url: { url: `data:${mimeType};base64,${imageBase64}` }
          }
        ]
      }
    ]
  })
  
  // Step 3: Extract and validate result
  extractedText = response.choices[0].message.content
  
  IF extractedText.length < 50:
    THROW Error('OCR result too short - image may be unclear')
  
  RETURN extractedText
END FUNCTION
```

**Error Handling:**
- Rate limit (429): Retry after delay
- Credits exhausted (402): User-friendly error
- Invalid image: Validate before sending

---

#### **Algorithm 4: Streaming Chat Response**
**File:** [chat/index.ts](supabase/functions/chat/index.ts), [ChatBot.tsx](src/components/ChatBot.tsx)

**Input:**
- `messages` (Message[]): Conversation history

**Output:**
- Streaming SSE (Server-Sent Events) response

**Pseudocode:**
```
FUNCTION streamChat(userMessages):
  // Backend (Deno Function):
  response = await callAI({
    model: 'gemini-2.5-flash',
    messages: [systemPrompt, ...userMessages],
    stream: true  // Enable streaming
  })
  
  RETURN response.body  // Stream directly to client
  
  // Frontend (React):
  FUNCTION handleSend():
    newMessages = [...messages, userMessage]
    setMessages(newMessages)
    
    response = fetch('/functions/v1/chat', {
      method: 'POST',
      body: JSON.stringify({ messages: newMessages })
    })
    
    reader = response.body.getReader()
    decoder = new TextDecoder()
    assistantContent = ''
    
    WHILE true:
      { done, value } = await reader.read()
      IF done: BREAK
      
      chunk = decoder.decode(value)
      lines = chunk.split('\n')
      
      FOR EACH line IN lines:
        IF line.startsWith('data: '):
          jsonStr = line.slice(6)
          IF jsonStr === '[DONE]': BREAK
          
          parsed = JSON.parse(jsonStr)
          content = parsed.choices[0].delta.content
          
          IF content:
            assistantContent += content
            // Update UI immediately (real-time typing effect)
            setMessages(prev => updateLastMessage(assistantContent))
END FUNCTION
```

**Key Features:**
- **Streaming:** Tá»«ng token hiá»‡n ngay, khÃ´ng Ä‘á»£i full response
- **Real-time Update:** React state update theo tá»«ng chunk
- **Error Recovery:** Try-catch cho JSON parsing

---

#### **Algorithm 5: Market Data Loading**
**File:** [compare-skills/index.ts](supabase/functions/compare-skills/index.ts)

**Input:** KhÃ´ng (hoáº·c dreamJob náº¿u cÃ³)

**Output:** Map<skill, count>

**Pseudocode:**
```
FUNCTION loadMarketData():
  // Step 1: Read CSV file
  csvPath = '../../../public/data/market_skills.csv'
  csvText = await Deno.readTextFile(csvPath)
  
  // Step 2: Parse CSV
  lines = csvText.split('\n')
  headers = lines[0].split(',')  // skill,count
  
  skillMap = new Map()
  
  FOR i = 1 TO lines.length - 1:
    IF lines[i].trim() === '': CONTINUE
    
    [skill, count] = lines[i].split(',')
    skillMap.set(skill.trim().toLowerCase(), parseInt(count))
  
  RETURN skillMap
END FUNCTION

FUNCTION getJobSpecificSkills(dreamJob):
  // Step 1: Call AI to get job requirements
  prompt = `
    List the top 20 technical skills required for: ${dreamJob}
    Return only skill names, one per line, no explanations.
  `
  
  response = await callAI(prompt)
  skills = response.split('\n').filter(s => s.trim())
  
  // Step 2: Create equal-weight map
  skillMap = new Map()
  FOR EACH skill IN skills:
    skillMap.set(skill.toLowerCase(), 100)  // Equal priority
  
  RETURN skillMap
END FUNCTION
```

**Data Source:**
- Primary: [market_skills.csv](public/data/market_skills.csv) - real job market data
- Fallback: AI-generated skills cho specific dream job

---

### 6.2. Helper Algorithms

#### **Text Normalization**
```
FUNCTION normalizeText(text):
  normalized = text.toLowerCase()
  normalized = normalized.replace(/[^\w\s]/g, ' ')  // Remove special chars
  normalized = normalized.replace(/\s+/g, ' ')      // Collapse whitespace
  RETURN normalized.trim()
END FUNCTION
```

#### **File Size Validation**
```
FUNCTION validateFileSize(file, maxSizeMB):
  maxBytes = maxSizeMB Ã— 1024 Ã— 1024
  IF file.size > maxBytes:
    THROW Error(`File must be smaller than ${maxSizeMB}MB`)
  RETURN true
END FUNCTION
```

#### **Base64 Encoding**
```
FUNCTION fileToBase64(file):
  reader = new FileReader()
  RETURN new Promise((resolve, reject) => {
    reader.onload = () => {
      result = reader.result  // "data:image/png;base64,..."
      base64 = result.split(',')[1]  // Extract base64 part
      resolve(base64)
    }
    reader.onerror = reject
    reader.readAsDataURL(file)
  })
END FUNCTION
```

---

## 7. PHÃ‚N TÃCH Ká»¸ THUáº¬T CHI TIáº¾T

### 7.1. Frontend Architecture

#### **State Management Strategy**
```typescript
// Sá»­ dá»¥ng @tanstack/react-query cho server state
const queryClient = new QueryClient();

// Component-level state cho UI
const [isOpen, setIsOpen] = useState(false);
const [loading, setLoading] = useState(false);

// Supabase real-time subscriptions
useEffect(() => {
  const channel = supabase
    .channel('skill_analyses')
    .on('postgres_changes', { 
      event: 'INSERT', 
      schema: 'public' 
    }, payload => {
      // Real-time updates
    })
    .subscribe();
  
  return () => channel.unsubscribe();
}, []);
```

#### **Routing Strategy**
```typescript
// App.tsx - Centralized routing
<Routes>
  <Route path="/" element={<Index />} />           // Public
  <Route path="/auth" element={<Auth />} />        // Public
  <Route path="/upload" element={<Upload />} />    // Protected
  <Route path="/results/:id" element={<Results />} />  // Protected
  <Route path="/history" element={<History />} />  // Protected
  <Route path="/profile" element={<Profile />} />  // Protected
  <Route path="/personalize" element={<Personalize />} />  // Protected
  <Route path="*" element={<NotFound />} />        // Catch-all
</Routes>

// Protected routes check auth internally
useEffect(() => {
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) navigate('/auth');
}, []);
```

#### **Styling Approach**
- **Tailwind CSS:** Utility-first, responsive
- **CSS Variables:** Theme customization
  ```css
  :root {
    --primary: 222.2 47.4% 11.2%;
    --accent: 210 40% 96.1%;
    --destructive: 0 84.2% 60.2%;
  }
  ```
- **Dark Mode Support:** `next-themes` package
- **Component Variants:** `class-variance-authority`

### 7.2. Backend Architecture

#### **Database Schema**
```sql
-- Core tables
profiles (
  id UUID PRIMARY KEY REFERENCES auth.users,
  main_language TEXT,
  dream_job TEXT,
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
)

skill_analyses (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES auth.users,
  file_name TEXT,
  file_url TEXT,
  student_skills JSONB,    -- ["python", "java", ...]
  market_skills JSONB,     -- [{skill, count, percentage}, ...]
  skill_gaps JSONB,        -- [{skill, count, percentage}, ...]
  match_percentage DECIMAL(5,2),
  market_readiness DECIMAL(5,2),
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
)

-- Storage
storage.buckets (
  transcripts -- User-uploaded files
)
```

#### **Security Model**
```sql
-- Row Level Security (RLS)
ALTER TABLE skill_analyses ENABLE ROW LEVEL SECURITY;

-- Policy: Users only see their own data
CREATE POLICY "Own data only"
  ON skill_analyses
  FOR ALL
  USING (auth.uid() = user_id);

-- Storage security
CREATE POLICY "Own files only"
  ON storage.objects
  FOR ALL
  USING (
    bucket_id = 'transcripts' AND
    auth.uid()::text = (storage.foldername(name))[1]
  );
```

#### **Edge Functions Deployment**
```bash
# Structure
supabase/functions/
â”œâ”€â”€ analyze-skills/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ compare-skills/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ ocr-transcript/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ get-job-skills/
â”‚   â””â”€â”€ index.ts
â””â”€â”€ chat/
    â””â”€â”€ index.ts

# Deploy command
supabase functions deploy analyze-skills --no-verify-jwt
```

### 7.3. AI Integration

#### **Gemini 2.5 Flash - Use Cases**
1. **OCR (Vision):**
   ```typescript
   // Image â†’ Text extraction
   model: 'google/gemini-2.5-flash'
   input: { type: 'image_url', image_url: { url: base64Image } }
   output: Structured text
   ```

2. **Skill Extraction (Text Analysis):**
   ```typescript
   // Text â†’ Skills array
   // Hiá»ƒu context cá»§a mÃ´n há»c â†’ technical skills
   "Láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng vá»›i Java" â†’ ["java", "oop"]
   ```

3. **Job Skills Lookup:**
   ```typescript
   // Dream job â†’ Required skills
   prompt: "List top skills for Full Stack Developer"
   output: ["javascript", "react", "node.js", "sql", ...]
   ```

4. **Conversational AI (Chatbot):**
   ```typescript
   // Multi-turn conversation vá»›i context
   system: "You are SkillGap AI Assistant..."
   messages: [...conversation history]
   stream: true  // Real-time responses
   ```

#### **API Rate Limiting & Costs**
- **Rate Limit:** Handled vá»›i 429 status
- **Cost Control:** Credits system
- **Error Messages:** User-friendly 402 response

### 7.4. Data Visualization

#### **Recharts Configuration**
```typescript
<ResponsiveContainer width="100%" height={400}>
  <BarChart data={chartData}>
    <CartesianGrid strokeDasharray="3 3" />
    <XAxis dataKey="skill" />
    <YAxis />
    <Tooltip 
      contentStyle={{
        backgroundColor: 'hsl(var(--card))',
        border: '1px solid hsl(var(--border))',
        borderRadius: '0.75rem'
      }}
    />
    <Legend />
    <Bar dataKey="yourLevel" fill="hsl(var(--primary))" name="Your Level" />
    <Bar dataKey="marketDemand" fill="hsl(var(--accent))" name="Market Demand" />
  </BarChart>
</ResponsiveContainer>
```

**Chart Data Structure:**
```typescript
[
  {
    skill: 'React',
    yourLevel: 70,        // 0-100 scale
    marketDemand: 95,     // Percentage of jobs requiring
    gap: 25               // Difference
  },
  // ... more skills
]
```

### 7.5. Performance Optimizations

#### **Code Splitting**
```typescript
// Vite auto code-splits by route
import Index from './pages/Index';  // Separate chunk
import Upload from './pages/Upload';  // Separate chunk
```

#### **Lazy Loading**
```typescript
// Components load on-demand
const ChatBot = lazy(() => import('@/components/ChatBot'));
```

#### **Image Optimization**
```typescript
// Tailwind responsive images
<img 
  src={heroBg} 
  className="w-full h-auto"
  loading="lazy"
  alt="Hero background"
/>
```

#### **Database Indexing**
```sql
-- Auto-indexed on:
CREATE INDEX ON skill_analyses(user_id);  -- For filtering
CREATE INDEX ON skill_analyses(created_at DESC);  -- For sorting
```

### 7.6. Error Handling Strategy

#### **Frontend Error Boundaries**
```typescript
// Global error handler
window.addEventListener('unhandledrejection', event => {
  console.error('Unhandled promise rejection:', event.reason);
  toast({
    title: "Something went wrong",
    description: "Please try again or contact support",
    variant: "destructive"
  });
});
```

#### **Backend Error Responses**
```typescript
// Standardized error format
{
  error: "User-friendly error message",
  code: "ERROR_CODE",  // Optional
  details: { ... }     // Optional, for debugging
}
```

#### **Network Error Handling**
```typescript
try {
  const response = await supabase.functions.invoke('analyze-skills', {...});
  if (response.error) throw response.error;
} catch (error) {
  if (error.message.includes('network')) {
    toast({ title: "Network error", description: "Check connection" });
  } else if (error.message.includes('timeout')) {
    toast({ title: "Request timeout", description: "Try again" });
  } else {
    toast({ title: "Error", description: error.message });
  }
}
```

---

## 8. Káº¾T LUáº¬N

### 8.1. TÃ³m táº¯t á»©ng dá»¥ng TÆ° duy TÃ­nh toÃ¡n

#### **Decomposition (PhÃ¢n rÃ£ váº¥n Ä‘á»)**
âœ… **ThÃ nh cÃ´ng:**
- Chia há»‡ thá»‘ng thÃ nh 9 modules Ä‘á»™c láº­p
- Má»—i module cÃ³ responsibility rÃµ rÃ ng
- Frontend/Backend/AI layers tÃ¡ch biá»‡t hoÃ n toÃ n

#### **Pattern Recognition (Nháº­n dáº¡ng máº«u)**
âœ… **ThÃ nh cÃ´ng:**
- Nháº­n diá»‡n Ä‘Æ°á»£c 6 architectural patterns
- Ãp dá»¥ng consistent patterns: Component-based, Serverless, Auth flow
- TÃ¡i sá»­ dá»¥ng patterns giáº£m code duplication

#### **Abstraction (Trá»«u tÆ°á»£ng hÃ³a)**
âœ… **ThÃ nh cÃ´ng:**
- 4 layers abstraction: Presentation, Business Logic, Data Access, AI Service
- Interface-driven development
- Skill mapping dictionary = single source of truth

#### **Algorithm Design (Thiáº¿t káº¿ thuáº­t toÃ¡n)**
âœ… **ThÃ nh cÃ´ng:**
- 5 core algorithms vá»›i complexity analysis
- Optimized skill extraction: O(n Ã— m Ã— k)
- Efficient gap analysis: O(n log n)
- Streaming chat cho real-time UX

### 8.2. Äiá»ƒm máº¡nh cá»§a dá»± Ã¡n

1. **Modularity:** Dá»… maintain vÃ  má»Ÿ rá»™ng
2. **Security:** RLS policies, JWT auth
3. **Scalability:** Serverless architecture, edge functions
4. **UX:** Real-time feedback, progressive enhancement
5. **AI-Powered:** Gemini 2.5 cho OCR, skills analysis, chatbot
6. **Data-Driven:** Real market data (1491 job postings)
7. **Multilingual:** Vietnamese/English support
8. **Responsive:** Mobile-first design

### 8.3. CÆ¡ há»™i cáº£i thiá»‡n

1. **Testing:** ThÃªm unit tests, integration tests
2. **Analytics:** Track user behavior, conversion funnel
3. **Caching:** Redis cho market data, skill mappings
4. **Batch Processing:** Xá»­ lÃ½ nhiá»u files cÃ¹ng lÃºc
5. **Export:** PDF/Excel reports
6. **Recommendations:** AI-powered learning path suggestions
7. **Social Features:** Share results, compare with peers
8. **Notifications:** Email alerts khi cÃ³ new gap analysis

### 8.4. Tech Stack Assessment

| Component | Technology | Rating | LÃ½ do |
|-----------|-----------|--------|-------|
| **Frontend Framework** | React 18 + TypeScript | â­â­â­â­â­ | Type safety, component reusability |
| **UI Library** | shadcn/ui | â­â­â­â­â­ | Beautiful, accessible, customizable |
| **Backend** | Supabase | â­â­â­â­â­ | All-in-one: DB, Auth, Storage, Functions |
| **AI** | Gemini 2.5 Flash | â­â­â­â­â˜† | Fast, affordable, multi-modal |
| **Build Tool** | Vite | â­â­â­â­â­ | Extremely fast HMR |
| **Deployment** | Lovable | â­â­â­â­â˜† | Easy CI/CD, edge deployment |

### 8.5. Há»c Ä‘Æ°á»£c gÃ¬ tá»« dá»± Ã¡n

#### **Vá» Computational Thinking:**
1. **Decomposition giÃºp quáº£n lÃ½ complexity:** Chia nhá» â†’ dá»… code, debug, test
2. **Pattern recognition tiáº¿t kiá»‡m thá»i gian:** TÃ¡i sá»­ dá»¥ng solutions Ä‘Ã£ proven
3. **Abstraction tÄƒng flexibility:** Dá»… swap implementations khÃ´ng áº£nh hÆ°á»Ÿng toÃ n há»‡ thá»‘ng
4. **Algorithm design cáº§n balance:** Performance vs. Readability vs. Maintainability

#### **Vá» Software Engineering:**
1. **Security by design:** RLS policies tá»« Ä‘áº§u, khÃ´ng hotfix sau
2. **User-centric development:** Progress bars, loading states, error messages
3. **Data-driven decisions:** Real job market data â†’ accurate analysis
4. **Iterative improvement:** Start simple, add complexity khi cáº§n

#### **Vá» Team Collaboration:**
1. **Code organization matters:** Clear folder structure giÃºp onboarding
2. **Documentation is key:** Comments, README, migration files
3. **Consistent naming:** camelCase cho JS, snake_case cho DB
4. **Version control:** Git commits vá»›i meaningful messages

---

## PHá»¤ Lá»¤C

### A. File Structure Map
```
SkillGapAI/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/      (UI components)
â”‚   â”‚   â”œâ”€â”€ ui/         (40+ shadcn components)
â”‚   â”‚   â”œâ”€â”€ ChatBot.tsx
â”‚   â”‚   â”œâ”€â”€ SkillGapChart.tsx
â”‚   â”‚   â”œâ”€â”€ TopNav.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ pages/          (Route pages)
â”‚   â”‚   â”œâ”€â”€ Index.tsx
â”‚   â”‚   â”œâ”€â”€ Upload.tsx
â”‚   â”‚   â”œâ”€â”€ Results.tsx
â”‚   â”‚   â”œâ”€â”€ History.tsx
â”‚   â”‚   â”œâ”€â”€ Auth.tsx
â”‚   â”‚   â”œâ”€â”€ Personalize.tsx
â”‚   â”‚   â”œâ”€â”€ Profile.tsx
â”‚   â”‚   â””â”€â”€ NotFound.tsx
â”‚   â”œâ”€â”€ hooks/          (Custom React hooks)
â”‚   â”œâ”€â”€ lib/            (Utilities)
â”‚   â”œâ”€â”€ integrations/   (Supabase client)
â”‚   â””â”€â”€ App.tsx         (Root component)
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ functions/      (Edge Functions)
â”‚   â”‚   â”œâ”€â”€ analyze-skills/
â”‚   â”‚   â”œâ”€â”€ compare-skills/
â”‚   â”‚   â”œâ”€â”€ ocr-transcript/
â”‚   â”‚   â”œâ”€â”€ get-job-skills/
â”‚   â”‚   â””â”€â”€ chat/
â”‚   â””â”€â”€ migrations/     (DB schema versions)
â”œâ”€â”€ public/
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ market_skills.csv
â”‚       â””â”€â”€ skills_config.py
â””â”€â”€ package.json
```

### B. Environment Variables
```env
VITE_SUPABASE_URL=https://xxx.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=eyJxxx...
LOVABLE_API_KEY=sk-xxx...  (Backend only)
```

### C. Key Dependencies
```json
{
  "dependencies": {
    "react": "^18.3.1",
    "react-router-dom": "^6.30.1",
    "@supabase/supabase-js": "^2.83.0",
    "@tanstack/react-query": "^5.83.0",
    "recharts": "^2.15.4",
    "zod": "^3.25.76",
    "react-hook-form": "^7.61.1",
    "lucide-react": "^0.462.0",
    "tailwindcss": "^3.4.17"
  }
}
```

### D. Database Commands
```bash
# Start Supabase locally
supabase start

# Apply migrations
supabase db push

# Reset database
supabase db reset

# Deploy functions
supabase functions deploy analyze-skills
```

### E. Deployment Workflow
```bash
# 1. Development
npm run dev              # Start dev server (port 8080)

# 2. Build
npm run build            # Vite build â†’ dist/

# 3. Preview
npm run preview          # Test production build locally

# 4. Deploy (via Lovable)
git push origin main     # Auto-deploy to Lovable hosting
```

---

**NgÆ°á»i viáº¿t bÃ¡o cÃ¡o:** Nguyá»…n Há»“ Anh Quá»‘c   
**NgÃ y hoÃ n thÃ nh:** 12/12/2025

**Ghi chÃº:** BÃ¡o cÃ¡o nÃ y phÃ¢n tÃ­ch toÃ n diá»‡n dá»± Ã¡n SkillGapAI theo 4 bÆ°á»›c cá»§a TÆ° duy TÃ­nh toÃ¡n. Má»i thÃ´ng tin Ä‘Æ°á»£c trÃ­ch xuáº¥t trá»±c tiáº¿p tá»« source code vÃ  cÃ³ references Ä‘áº¿n files cá»¥ thá»ƒ.
